let o,n=`ws://${window.location.hostname}/ws`,e={};const t=[...document.querySelectorAll("input.btn")];function s(){u()}function i(n){o.send(n),document.querySelector("h1").textContent=n}function c(){o.send("s"),document.querySelector("h1").textContent="s"}function u(){console.log("Trying to open a websocket connection:"),o=new WebSocket(n),o.onopen=d,o.onclose=l,o.onmessage=h}function d(){console.log("Connection etablished: "),t.forEach((o=>{o.onmousedown=i.bind(this,o.id),o.ontouchstart=i.bind(this,o.id),"l"==o.id||"r"==o.id?(o.onmouseup=i.bind(this,"ts"),o.onmouseout=i.bind(this,"ts"),o.ontouchmove=i.bind(this,"ts"),o.ontouchend=i.bind(this,"ts")):(o.onmouseup=c,o.onmouseout=c,o.ontouchmove=c,o.ontouchend=c)}))}function l(){console.log("Connection lost: "),setTimeout(u,5e3)}function h(o){console.log("Message received: "),console.log}window.addEventListener("load",s);